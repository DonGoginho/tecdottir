swagger: "2.0"
info:
  version: "0.0.1"
  title: Tecdottir
  description: This API returns data of the Tecson meteo station placed at Tiefenbrunnen and Mythenquai water police station.
  license:
      name: MIT License, Â© Stefan Oderbolz 2017
      url: https://github.com/metaodi/tecdottir/blob/master/LICENSE.md
host: tecdottir.herokuapp.com
# basePath prefixes all resource paths 
basePath: /
schemes:
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
tags:
  -
    name: measurements
    description: Measurement data
paths:
  /measurements/{station}:
    x-swagger-router-controller: scraper
    get:
      tags:
        - measurements
      description: Returns the measurements values of the specified station
      # used as the method name of the controller
      operationId: measurements
      parameters:
        - name: station
          in: path
          description: The station of which the values should be returned
          required: true
          type: string
          enum: ["tiefenbrunnen", "mythenquai"]
        - name: startDate
          in: query
          description: "The start date after which the measurements should be returned. Format: YYYY-MM-DD"
          required: false
          type: string
          format: date
        - name: endDate
          in: query
          description: "The end date before which the measurements should be returned. Format: YYYY-MM-DD"
          required: false
          type: string
          format: date
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/MeasurementApiResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /stations:
    x-swagger-router-controller: scraper
    get:
      tags:
        - measurements
      description: Returns the available stations
      # used as the method name of the controller
      operationId: stations
      responses:
        "200":
          description: Success
          schema:
            # a pointer to a definition
            $ref: "#/definitions/StationApiResponse"
        # responses may fall through to errors
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  MeasurementResponse:
    required:
      - station
      - timestamp
      - values
    properties:
       station:
           type: string
       timestamp:
         type: string
         format: date-time
       values:
         $ref: "#/definitions/Measurement"
  Measurement:
    properties:
      timestamp_cet:
        type: object
        properties:
          value:
            type: string
          unit:
            type: string
      air_temperature:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      water_temperature:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      wind_gust_max_10min:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      wind_speed_avg_10min:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      wind_force_avg_10min:
        type: object
        properties:
          value:
            type: integer
          unit:
            type: string
      wind_direction:
        type: object
        properties:
          value:
            type: integer
          unit:
            type: string
      windchill:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      barometric_pressure_qfe:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      percipitation:
        type: object
        properties:
          value:
            type: integer
          unit:
            type: string
      dew_point:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
      global_radiation:
        type: object
        properties:
          value:
            type: integer
          unit:
            type: string
      humidity:
        type: object
        properties:
          value:
            type: integer
          unit:
            type: string
      water_level:
        type: object
        properties:
          value:
            type: number
          unit:
            type: string
  MeasurementApiResponse:
    required:
      - ok
      - result
    properties:
      ok:
        type: boolean
      result:
        type: array
        items:
          $ref: "#/definitions/MeasurementResponse"
  StationApiResponse:
    required:
      - ok
      - result
    properties:
      ok:
        type: boolean
      result:
        type: array
        items:
          $ref: "#/definitions/Station"
  Station:
    required:
      - slug
      - title
    properties:
      slug:
        type: string
      title:
        type: string
  ErrorResponse:
    required:
      - ok
      - message
    properties:
      ok:
        type: boolean
      message:
        type: string
